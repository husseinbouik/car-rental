<!-- Updated Tailwind classes and removed original var() colors from inline style -->
<!-- The var(--primary-color) should be defined in your global CSS / theme -->
<nav class="flex items-center justify-between p-4 shadow-md transition-colors duration-300" style="background-color: var(--primary-color); color: white;">
  <div class="flex items-center space-x-4">
    <!-- Sidebar Toggle Button (Only relevant on non-mobile screens where sidebar is fixed) -->
    <!-- You might hide this on mobile or make it trigger a different overlay menu -->
    <button (click)="toggleSidebar()" class="p-2 rounded-md hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/50">
      <fa-icon [icon]="faBars"></fa-icon>
    </button>

     <!-- Optional: Brand/Logo area - You might hide sidebar button on mobile and put logo here -->
    <!-- <div class="hidden md:flex items-center space-x-2 ml-2">
        <i class="fas fa-car text-xl"></i>
        <span class="text-lg font-semibold">{{ 'brand' | translate }}</span>
    </div> -->
  </div>

  <!-- Right Side Controls -->
  <div class="flex items-center space-x-4">

    <!-- Language Selector -->
    <select [(ngModel)]="currentLang" (change)="switchLanguage($event)"
            class="px-3 py-1 rounded-md border focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer"
            style="background-color: var(--card-background); color: var(--text-color); border-color: var(--border-color);">
      <option value="en">English</option>
      <option value="fr">FranÃ§ais</option>
    </select>

    <!-- Dark Mode Toggle Button -->
    <button (click)="toggleDarkMode()"
            class="p-2 rounded-md hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/50">
      <fa-icon [icon]="isDarkMode ? faMoon : faSun"></fa-icon>
      <!-- Optional text toggle -->
      <!-- <span class="ml-1 hidden md:inline">{{ isDarkMode ? ('navbar.light_mode' | translate) : ('navbar.dark_mode' | translate) }}</span> -->
    </button>

    <!-- User Info and Logout -->
     <div *ngIf="isLoggedIn()" class="flex items-center space-x-2 ml-2">
        <fa-icon [icon]="faUserCircle" class="text-xl"></fa-icon>
        <span class="hidden md:inline">{{ getUserDisplayName() }}</span>
        <button (click)="logout()"
                class="px-3 py-1 rounded-md transition duration-300"
                style="background-color: #ef4444; color: white;">
          {{ 'navbar.logout' | translate }} <!-- Add translation key -->
        </button>
     </div>

     <!-- Optional: Show login/signup links if NOT logged in -->
     <div *ngIf="!isLoggedIn()" class="flex items-center space-x-4 ml-2">
         <a routerLink="/login" class="text-white hover:text-white/80 transition-colors">{{ 'navbar.login' | translate }}</a>
         <a routerLink="/signup" class="font-semibold px-3 py-1 rounded-md transition duration-300" style="background-color: white; color: var(--primary-color);">{{ 'navbar.signup' | translate }}</a>
     </div>

  </div>
</nav>
